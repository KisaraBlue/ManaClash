<!DOCTYPE html>
<html>
  <head lang="en">
    <meta charset="UTF-8">
    <title>Flask Rezefiodsjct</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- styles -->
  </head>
  <body>
    <link rel="stylesheet" href="index.css">
    <div class="container">
        <div id="content"></div>
    </div>
    <!-- scripts -->
    

    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.1.0/react.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.1.0/react-dom.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/JSXTransformer.js"></script>
    <script type="text/jsx">
        var demo_monsters= [
        {monster_id:0, name:'abcd', attack_points:40, defense_points:50},
        {monster_id:1, name:'bcde', attack_points:50, defense_points:60},
        {monster_id:2, name:'cdef', attack_points:60, defense_points:70},
        {monster_id:3, name:'defg', attack_points:70, defense_points:80},
        {monster_id:4, name:'efgh', attack_points:80, defense_points:90},
        ]

        var demo_board_monster=[
        {board_id:0, monster_id:0},
        {board_id:0, monster_id:1},
        {board_id:1, monster_id:2},
        {board_id:1, monster_id:3},
        ]


        function Deck(props) {
            return (
                <button
                className="card_pile"
                onClick={props.onClick}
                >{'Deck: ' + props.value}
                </button>
            )
        }
        
        function Card(props) {
            return (
                <button
                className="card"
                onClick={props.onClick}
                >{props.value}
                </button>
            )
        }
        
        function Hand(props) {
            return (
                <button
                className="card_hand"
                onClick={props.onClick}
                >{props.value}
                </button>
            )
        }
        
        function Arrow(props) {
            return (
                <button
                className="arrow_hand"
                onClick={props.onClick}
                >{props.value}
                </button>
            )
        }
        
        class Board extends React.Component {
            renderDeck(nb) {
                return (
                <Deck
                value={nb}
                onClick={() => this.props.deckClick()}
                />
                );
            }
        
            renderCard(id) {
                if (id === null) {
                    return (
                    <Card
                    value={'Null'}
                    onClick={() => this.props.cardClick()}
                    />);
                } else {
                    var dummy = 'Dumdum';
                    return (
                    <Card
                    value={dummy}
                    onClick={() => this.props.cardClick()}
                    />);
                }
            }
        
            renderHand() {
                return (
                <Hand
                value={null}
                onClick={() => this.props.cardClick()}
                />
                );
            }
        
            renderArrow(char) {
                return (
                <Arrow
                value={char}
                onClick={() => this.props.cardClick()}
                />
                );
            }
        
            render() {
                return (
                <div>
                    <div className="card-row">
                        {this.renderArrow('<-')}
                        {this.renderHand(0)}
                        {this.renderHand(1)}
                        {this.renderHand(2)}
                        {this.renderHand(3)}
                        {this.renderHand(4)}
                        {this.renderHand(5)}
                        {this.renderArrow('->')}
                    </div>
                    <div className="card-row">
                        {this.renderDeck(this.props.grave2)}
                        {this.renderCard(this.props.field2[0])}
                        {this.renderCard(this.props.field2[1])}
                        {this.renderCard(this.props.field2[2])}
                        {this.renderCard(this.props.field2[3])}
                        {this.renderDeck(this.props.deck2)}
                    </div>
                    <div className="card-row">
                        {this.renderDeck(this.props.deck1)}
                        {this.renderCard(this.props.field1[0])}
                        {this.renderCard(this.props.field1[1])}
                        {this.renderCard(this.props.field1[2])}
                        {this.renderCard(this.props.field1[3])}
                        {this.renderDeck(this.props.grave1)}
                    </div>
                    <div className="card-row">
                        {this.renderArrow('<-')}
                        {this.renderHand(0)}
                        {this.renderHand(1)}
                        {this.renderHand(2)}
                        {this.renderHand(3)}
                        {this.renderHand(4)}
                        {this.renderHand(5)}                
                        {this.renderArrow('->')}
                    </div>
                </div>
                );
            }
        }
        
        class Game extends React.Component {
            constructor(props) {
                super(props);
                this.state = {
                    deck1: Array(30).fill(null),
                    field1: Array(4).fill(null),
                    grave1: Array(30).fill(null),
                    hand1: Array(30).fill(null),
                    ds1: 0,
                    gs1: 0,
                    fs1: 0,
                    hs1: 0,
                    deck2: Array(30).fill(null),
                    field2: Array(4).fill(null),
                    grave2: Array(30).fill(null),
                    hand2: Array(30).fill(null),
                    ds2: 0,
                    gs2: 0,
                    fs2: 0,
                    hs2: 0,
                    stepNumber: 0,
                    oneIsNext: true,
                    mana1: 30,
                    mana2: 30,
                };
            }
        
            jumpTo(step) {
                this.setState({
                    stepNumber: step,
                    xIsNext: (step % 2) === 0,
                });
            }
        
            handleClick(i) {
                const history = this.state.history.slice(0,
                    this.state.stepNumber + 1);
                const current = history[history.length - 1];
                const squares = current.squares.slice();
                if (squares[i]) {
                    return;
                }
                squares[i] = this.state.xIsNext ? 'X' : 'O';
                this.setState({
                    history: history.concat([{
                        squares: squares,
                    }]),
                    stepNumber: history.length,
                    xIsNext: !this.state.xIsNext,
                });
            }
        
            handleCardButton(card) {
                return null
            }
        
            render() {
                const deck_back = this.state.deck1.length;

                
                /*for(i = 0; i < 4; i++) {
                    if (demo_board_monster[i].board_id === 0) {
                        this.state.field1[this.state.fs1] = demo_board_monster[i].monster_id;
                        this.state.fs1++;
                    } else {
                        this.state.field2[this.state.fs2] = demo_board_monster[i].monster_id;
                        this.state.fs2++;
                    }
                };*/
                
        
                return (
                <div className="game">
                    <div className="game-board">
                        <Board
                        field1={this.state.field1}
                        field2={this.state.field2}
                        deck1={this.state.ds1}
                        grave1={this.state.gs1}
                        deck2={this.state.ds2}
                        grave2={this.state.gs2}
                        deckClick={() => this.handleDraw()}
                        onClick={(i) => this.handleClick(i)}
                        />
                    </div>
                    
                </div>
                );
            }
        }
        
        /*
        <div className="game-info">
            <div>{status}</div>
            <ol>{moves}</ol>
        </div>
        */
        
        // ========================================
        
        ReactDOM.render(
            <Game />,
            document.getElementById('content')
        );


    </script>
  </body>
</html>